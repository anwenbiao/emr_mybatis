<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <!-- 上述3个meta标签*必须*放在最前面，任何其他内容都*必须*跟随其后！ -->
    <title>设计模式--电子病历设计器</title>
    <script type="text/javascript" src="../sde.config.js?_=9"></script>
    <link rel="stylesheet" href="../ueditor/themes/default/css/ueditor.css" />
    <script type="text/javascript" src="../ueditor/ueditor.all.js?d=958"></script>
    <script type="text/javascript" src="../ueditor/lang/zh-cn/zh-cn.js"></script>
    <!-- 增加自定义toolbar title -->
    <script type="text/javascript" src="../lang/sde-zh-cn.js"></script>
    <script type="text/javascript" id="design" src="../dist/js/sde.design.js?_=97449"></script>
    <script type="text/javascript"  src="../ueditor/third-party/jquery-1.10.2.js"></script>
</head>

<body>
    <div><input type="button" value="获取内容" onclick="getContext()"/></div>
    <div><input type="button" value="设置内容" onclick="setContext()"/></div>
    <div><input type="button" value="替换值" onclick="pareContext()"/></div>
    <script id="myEditor" type="text/plain" style="width:680px;height:1000px;">

        <h1 style="text-align: center;">入 &nbsp;院 &nbsp;记 &nbsp;录</h1>


    </script>

    <script>
        var templates = [{
            "ID": "xbState",
            "NAME": "小便状态",
            "TYPE": "select",
            "TAG": "",
            "DESCNAME": "小便状态",
            "HTML": "<span id=\"xbState\" title=\"小便状态\"  sde-model=\"{&quot;ID&quot;:&quot;xbState&quot;,&quot;TYPE&quot;:&quot;select&quot;,&quot;NAME&quot;:&quot;小便状态&quot;,&quot;TAG&quot;:&quot;&quot;,&quot;DESCNAME&quot;:&quot;小便状态&quot;,&quot;REQUIRED&quot;:0,&quot;FREEINPUT&quot;:0,&quot;COLOR&quot;:&quot;000000&quot;,&quot;VALUE&quot;:&quot;&quot;,&quot;TEXT&quot;:&quot;&quot;,&quot;REMOTEURL&quot;:&quot;&quot;,&quot;BINDINGDATA&quot;:[{&quot;VALUE&quot;:&quot;小便正常&quot;,&quot;TEXT&quot;:&quot;小便正常&quot;,&quot;SELECTED&quot;:0},{&quot;VALUE&quot;:&quot;尿少&quot;,&quot;TEXT&quot;:&quot;尿少&quot;,&quot;SELECTED&quot;:0},{&quot;VALUE&quot;:&quot;无尿&quot;,&quot;TEXT&quot;:&quot;无尿&quot;,&quot;SELECTED&quot;:0},{&quot;VALUE&quot;:&quot;夜尿繁多&quot;,&quot;TEXT&quot;:&quot;夜尿繁多&quot;,&quot;SELECTED&quot;:0}]}\" contenteditable=\"false\" class=\"sde-bg\"><span class=\"sde-left\" style=\"color:#0000FF\" contenteditable=\"false\">[</span><span title=\"小便状态\" style=\"color:#000000;\" class=\"sde-value\" onclick=\"EMR.select.tlspanclick(this);\" ondblclick=\"EMR.select.tlspandblclick(this);\" contenteditable=\"false\">小便状态</span><span style=\"color:#0000FF\" contenteditable=\"false\" class=\"sde-right\">]</span></span>"
        }, {
            "ID": "tzState",
            "NAME": "体重状况",
            "TYPE": "select",
            "TAG": "",
            "DESCNAME": "体重状况",
            "HTML": "<span id=\"tzState\" title=\"体重状况\"  sde-model=\"{&quot;ID&quot;:&quot;tzState&quot;,&quot;TYPE&quot;:&quot;select&quot;,&quot;NAME&quot;:&quot;体重状况&quot;,&quot;TAG&quot;:&quot;&quot;,&quot;DESCNAME&quot;:&quot;体重状况&quot;,&quot;REQUIRED&quot;:0,&quot;FREEINPUT&quot;:0,&quot;COLOR&quot;:&quot;000000&quot;,&quot;VALUE&quot;:&quot;&quot;,&quot;TEXT&quot;:&quot;&quot;,&quot;REMOTEURL&quot;:&quot;&quot;,&quot;BINDINGDATA&quot;:[{&quot;VALUE&quot;:&quot;体重无变化&quot;,&quot;TEXT&quot;:&quot;体重无变化&quot;,&quot;SELECTED&quot;:0},{&quot;VALUE&quot;:&quot;体重减轻&quot;,&quot;TEXT&quot;:&quot;体重减轻&quot;,&quot;SELECTED&quot;:0},{&quot;VALUE&quot;:&quot;体重增加&quot;,&quot;TEXT&quot;:&quot;体重增加&quot;,&quot;SELECTED&quot;:0}]}\" contenteditable=\"false\" class=\"sde-bg\"><span class=\"sde-left\" style=\"color:#0000FF\" contenteditable=\"false\">[</span><span title=\"体重状况\" style=\"color:#000000;\" class=\"sde-value\" onclick=\"EMR.select.tlspanclick(this);\" ondblclick=\"EMR.select.tlspandblclick(this);\" contenteditable=\"false\">体重状况</span><span style=\"color:#0000FF\" contenteditable=\"false\" class=\"sde-right\">]</span></span>"
        }, {
            "ID": "patientName",
            "NAME": "患者姓名",
            "TYPE": "text",
            "TAG": "",
            "DESCNAME": "患者姓名",
            "HTML": '<span id="patientName" title="患者姓名" sde-model="{&quot;ID&quot;:&quot;patientName&quot;,&quot;TYPE&quot;:&quot;text&quot;,&quot;NAME&quot;:&quot;患者姓名&quot;,&quot;TAG&quot;:&quot;&quot;,&quot;DESCNAME&quot;:&quot;患者姓名&quot;,&quot;VERIFYTYPE&quot;:&quot;text&quot;,&quot;VALUE&quot;:&quot;&quot;,&quot;REQUIRED&quot;:0,&quot;READONLY&quot;:0,&quot;COLOR&quot;:&quot;000000&quot;}" contenteditable="false" class="sde-bg"><span class="sde-left" style="color:#0000FF" contenteditable="false">[</span><span title="患者姓名" style="color:#000000;" class="sde-value" contenteditable="true">患者姓名</span><span style="color:#0000FF" contenteditable="false" class="sde-right">]</span></span>'
        },{
            "ID": "sex",
            "NAME": "患者性别",
            "TYPE": "text",
            "TAG": "",
            "DESCNAME": "患者性别",
            "HTML": '<span id="sex" title="患者性别" sde-model="{&quot;ID&quot;:&quot;sex&quot;,&quot;TYPE&quot;:&quot;text&quot;,&quot;NAME&quot;:&quot;患者性别&quot;,&quot;TAG&quot;:&quot;&quot;,&quot;DESCNAME&quot;:&quot;患者性别&quot;,&quot;VERIFYTYPE&quot;:&quot;text&quot;,&quot;VALUE&quot;:&quot;&quot;,&quot;REQUIRED&quot;:0,&quot;READONLY&quot;:0,&quot;COLOR&quot;:&quot;000000&quot;}" contenteditable="false" class="sde-bg"><span class="sde-left" style="color:#0000FF" contenteditable="false">[</span><span title="患者性别" style="color:#000000;" class="sde-value" contenteditable="true">患者性别</span><span style="color:#0000FF" contenteditable="false" class="sde-right">]</span></span>'
        }];



    </script>
    <script type="text/javascript">
        //扩展方式
        SDE.Plugins = [];
        SDE.Plugins.push({
            name: 'sde-toolbar-test',
            title: '外部链接',
            editor: null,
            init: function() {
                //debugger;
                var div = document.createElement('div');
                div.className = 'tab-content-item';
                div.setAttribute('id', this.name);

                var btn1 = document.createElement('div');
                btn1.className = 'tab-content-item-panel';
                btn1.innerHTML = ' <div class="tab-content-item-panel-label">链接</div>' +
                    '<div class="tab-content-item-panel-content">' +
                    '<div style="float:left;">' +
                    '<div class="tab-content-item-panel-content-control" onclick="window.location.href = \'http://www.baidu.com/\';" title="百度">' +
                    '<div class="sde-icon sde-icon-emrdesign" style="width: 64px;height: 32px;"></div>' +
                    '<div style="text-align: center;">百度</div>' +
                    ' </div>' +
                    '</div>' +
                    '</div>';
                div.appendChild(btn1);

                var btn2 = document.createElement('div');
                btn2.className = 'tab-content-item-panel';
                btn2.innerHTML = ' <div class="tab-content-item-panel-label">链接</div>' +
                    '<div class="tab-content-item-panel-content">' +
                    '<div style="float:left;">' +
                    '<div class="tab-content-item-panel-content-control" onclick="window.location.href = \'http://www.baidu.com/\';" title="百度">' +
                    '<div class="sde-icon sde-icon-emrdesign" style="width: 64px;height: 32px;"></div>' +
                    '<div style="text-align: center;">百度1</div>' +
                    ' </div>' +
                    '</div>' +
                    '</div>';
                div.appendChild(btn2);
                return div;
            }
        });
        var sde
        window.onload = function() {
             sde = new SDE({
                id: "myEditor",
                title: '<div style="height: 45px;overflow: hidden;background-color: #16742B;">' +
                    '<div class="left" style="position:absolute;top:0;left:0;">' +
                    '</div>' +
                    '<h1 style="font-size: 14px;height: 45px;line-height: 45px;margin: 0 auto;text-align: center;font-weight: normal;color:#fff;" >SoDiaoEditor电子病历编辑器</h1>' +
                    '</div>', //自定义title
                control_templates: templates,


            });
        };

        function pareContext(){

            $.ajax({
                url:"/inpPatientReg/getById?id=9DF88D702EB11BC9E053020011ACA74D",
                success:function(json){

                    //context.id=data.
                    var allControl=sde.getControl();
                    for (var key in json)
                    {
                        for(var i in allControl){
                            if(allControl[i].ID==key){
                                var context={ID:key,VALUE:json[key]};
                                sde.setControl(context)
                                break;
                            }
                        }

                    }

                }
            })

        }
    </script>
    <script>

        function getContext(){
            sde.html();
        }

        /**
         * 初始化 编辑器中的内容
         */
        function setContext(){
            sde.html(['']);
        }





    </script>
</body>

</html>